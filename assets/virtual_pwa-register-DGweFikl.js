import{_ as f}from"./index-CHga6s_t.js";function w(p={}){const{immediate:u=!1,onNeedRefresh:c,onOfflineReady:i,onRegistered:n,onRegisteredSW:l,onRegisterError:r}=p;let t,o,s;const _=async(e=!0)=>{await o,s==null||s()};async function m(){if("serviceWorker"in navigator){if(t=await f(async()=>{const{Workbox:e}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:e}},[]).then(({Workbox:e})=>new e("/FilTracker/sw.js",{scope:"/FilTracker/",type:"classic"})).catch(e=>{r==null||r(e)}),!t)return;s=()=>{t==null||t.messageSkipWaiting()};{let e=!1;const d=()=>{e=!0,t==null||t.addEventListener("controlling",a=>{a.isUpdate&&window.location.reload()}),c==null||c()};t.addEventListener("installed",a=>{typeof a.isUpdate>"u"?typeof a.isExternal<"u"&&a.isExternal?d():!e&&(i==null||i()):a.isUpdate||i==null||i()}),t.addEventListener("waiting",d)}t.register({immediate:u}).then(e=>{l?l("/FilTracker/sw.js",e):n==null||n(e)}).catch(e=>{r==null||r(e)})}}return o=m(),_}export{w as registerSW};
